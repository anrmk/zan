"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),AdminController=function(){function n(){var t=arguments.length<=1||arguments[1]===undefined?function(){}:arguments[1];_classCallCheck(this,n);this.hubConnection=null;this._hubInit();this.callback=t;this.callback(this)}return _createClass(n,[{key:"_hubInit",value:function(){var n=this;this.hubConnection=(new signalR.HubConnectionBuilder).withUrl("/syncDataHub").build();this.hubConnection.on("syncNsiResult",function(t){n._syncNsiResult(t)});this.hubConnection.onclose(function(){return regeneratorRuntime.async(function(n){for(var t=this;;)switch(n.prev=n.next){case 0:setTimeout(function(){return t._hubStartConnection()},1e4);case 1:case"end":return n.stop()}},null,n)});this._hubStartConnection()}},{key:"_hubStartConnection",value:function(){return regeneratorRuntime.async(function(n){for(var t=this;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.hubConnection.start().then(function(){console.log("syncDataHub connected")})["catch"](function(n){return setTimeout(function(){return t._hubStartConnection()},5e3),console.log(n)}));case 2:case"end":return n.stop()}},null,this)}},{key:"_syncNsiResult",value:function(n){n!=null&&$("#"+n.name+" .description").text("Количество записей: "+n.count+". Время обработки: "+n.leadTime)}}]),n}();